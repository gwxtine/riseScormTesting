(()=>{"use strict";var b={d:(t,l)=>{for(var i in l)b.o(l,i)&&!b.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:l[i]})},o:(t,l)=>Object.prototype.hasOwnProperty.call(t,l),r:t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},v={};b.r(v),b.d(v,{MightyRiseBlockModComponent:()=>x,MightyRiseBlockModEditorComponent:()=>D,MightyRiseThemeModComponent:()=>P,MightyRiseThemeModEditorComponent:()=>A,defineRiseBlockMod:()=>j,defineRiseThemeMod:()=>F});var e=(()=>((e=e||{}).NumberedList="numbered-list",e.CheckboxList="checkbox-list",e.BulletedList="bulleted-list",e.Storyline="storyline",e.Quote="quote",e.Scenario="scenario",e.Button="button",e.ButtonStack="button-stack",e.ContinueButton="continue-button",e.NumberedDivider="numbered-divider",e.Process="process",e.Video="video",e.Audio="audio",e.MultipleChoice="multiple-choice",e.MultipleResponse="multiple-response",e.Fillin="fill-in",e.Matching="matching",e.Embed="embed",e.Timeline="timeline",e.ImageText="image-&-text",e))();const S=new Map([[e.NumberedList,{viewerIdentifier:{type:"list",family:"list",variant:"numbered"}}],[e.CheckboxList,{viewerIdentifier:{type:"list",family:"list",variant:"checkboxes"}}],[e.BulletedList,{viewerIdentifier:{type:"list",family:"list",variant:"bulleted"}}],[e.Storyline,{viewerIdentifier:{type:"interactive",family:"360",variant:"storyline"}}],[e.Scenario,{viewerIdentifier:{type:"interactive",family:"interactive-fullscreen",variant:"scenario"}}],[e.Button,{viewerIdentifier:{type:"interactive",family:"buttons",variant:"button"}}],[e.ButtonStack,{viewerIdentifier:{type:"interactive",family:"buttons",variant:"button stack"}}],[e.ContinueButton,{viewerIdentifier:{type:"divider",family:"continue",variant:"continue"}}],[e.NumberedDivider,{viewerIdentifier:{type:"divider",family:"divider",variant:"numbered divider"}}],[e.Process,{viewerIdentifier:{type:"interactive",family:"interactive-fullscreen",variant:"process"}}],[e.Video,{viewerIdentifier:{type:"multimedia",family:"multimedia",variant:"video"}}],[e.Audio,{viewerIdentifier:{type:"multimedia",family:"multimedia",variant:"audio"}}],[e.MultipleChoice,{viewerIdentifier:{type:"knowledgeCheck",family:"knowledgeCheck",variant:"multiple choice"}}],[e.MultipleResponse,{viewerIdentifier:{type:"knowledgeCheck",family:"knowledgeCheck",variant:"multiple response"}}],[e.Fillin,{viewerIdentifier:{type:"knowledgeCheck",family:"knowledgeCheck",variant:"fillin"}}],[e.Matching,{viewerIdentifier:{type:"knowledgeCheck",family:"knowledgeCheck",variant:"matching"}}],[e.Embed,{viewerIdentifier:{type:"multimedia",family:"multimedia",variant:"embed"}}],[e.Quote,{viewerIdentifier:{type:"quote",family:"quote",variant:"a"}}],[e.Timeline,{viewerIdentifier:{type:"interactive",family:"interactive-fullscreen",variant:"timeline"}}],[e.ImageText,{viewerIdentifier:{type:"image",family:"image",variant:"text aside"}}]]);function B(t){return([...S].find(([l,i])=>t.family===i.viewerIdentifier.family&&t.type===i.viewerIdentifier.type&&t.variant===i.viewerIdentifier.variant)??[])[0]}const y={version:1,authoringPage:{appContainer:"#app",sidebar:{container:"#blocks-sidebar",blockEditor:".blocks-sidebar__edit",itemListContainer:".block-wizard__list-container",itemList:".block-wizard__list",item:".block-wizard__item",itemButton:".block-wizard__link",closeButton:".blocks-sidebar__close"},secondarySidebar:{container:".secondary-sidebar",sidebarOpenClass:"secondary-sidebar--open",nestedContainer:".secondary-sidebar__container",itemList:".blocks-group__list",itemButton:".blocks-group__link",itemLabel:".blocks-group__label"},riseBlock:{container:".block",willEnterSelector:".block--will-enter[data-block-id]",willEnterClass:"block--will-enter",blockIdAttribute:"data-block-id",blockIdSelector:"[data-block-id]",blockIdSelectorWithId:'[data-block-id="{{RISE_BLOCK_ID}}"]',blocksTabs:".blocks-tabs",blocksTabsCol:".blocks-tabs__col",blockControls:{leftSideContainer:".block-controls__scrollable",rightSideContainer:".block-controls__tools-options",editButton:".block-controls__btn-icon--type-content",duplicateButton:".block-controls__btn-icon.block-controls__btn-icon--type-duplicate",removeButton:".block-controls__tools .block-controls__btn-icon--type-remove"},designMenu:{main:".block-controls__menu-design",container:".block-design-menu__container",themeTintOption:".block-background-menu__item--tint",customColorOption:".block-background-menu__custom-color-wrap",selectedOptionCheckmark:"svg.block-background-menu__ico-checkmark",designMenuItem:".block-background-menu__item"}},shareSettingsContent:{container:".menu-popover__content .share__content"},lessonHeader:{title:".lesson-header__title"},richTextEditor:{codeView:".fr-code-view",submitAction:".fr-submit",codeViewCloseIcon:"a.fr-command.html-switch",colorPickerContainer:".fr-color-hex-layer",colorPickerInput:".fr-input-line"},notification:{container:".app-notification",messageContainer:".app-notification__message",actionContainer:".app-notification__action"},colorPicker:{container:".rise-color-picker",colorInputField:".rise-color-picker__field"},theme:{sidebarContainer:".author-layout__sidebar",iframeContainer:".author-layout__container",indexContainer:".author-theme__index",navContainerUlElement:"nav.author-theme__index-nav ul"},blocksShortcut:{container:".block-shortcut",allBlocksButton:".block-shortcut__all-blocks"}},previewPage:{appContainer:"#app",contentFrame:"iframe.preview-content__frame",contentFrameClass:"preview-content__frame",blockElementsWithCssSelectors:"[data-block-id][data-mighty-css-selector]",blockElementsWithoutCssSelectors:"[data-block-id]:not([data-mighty-css-selector])"},reviewPage:{reviewCardGridClass:"items-list-grid",reviewCardParentClass:"items-list--item",reviewCard:'[data-item-id="{{REVIEW_ITEM_ID}}"]',reviewCardAppLogo:".applogo"},publishPage:{container:".export-flow"},publishReviewPage:{settingsContainer:".review-publish-settings",settingsHeader:".settings-header",publishButton:'[data-testid="AppHeaderButtonGroup"] button',reviewItemInput:".review-publish-settings-new-item__input",reviewItemsDropdown:".dropdown__select",reviewItemsDropdownOptions:".dropdown-option",reviewItemsExitingRadioOption:"#radioExistingItem",reviewItemsNewRadioOption:"#radioNewItem"},downloadPage:{container:".export-download"},publishedCoursePage:{riseBlocks:{container:".block",blocksTabs:".blocks-tabs",markAsCompleteHeaderItems:"button.blocks-tabs__header-item",blockIdAttribute:"data-block-id",blockIdSelector:"[data-block-id]",blockIdSelectorWithId:'[data-block-id="{{RISE_BLOCK_ID}}"]',unlinkedBlocks:".block--unlinked",blockWrapperElement:".block-wrapper"}},mods:{audioBlock:{player:".audio-player",playButton:".audio-player__play"},videoBlock:{videoElement:"video",playControls:".vjs-play-control"},gradientMod:{onePager:{lessonSlideBackgroundTop:".blocks-lesson-slide__background-top",lessonSlideBackgroundBottom:".blocks-lesson-slide__background-bottom",lessonItems:".blocks-lesson-slide__wrapper:not(.blocks-lesson-slide__wrapper--exiting) .blocks-lesson-slide__lesson [data-block-id]"}},buttonMod:{continueButtonSelector:".continue-btn",knowledgeCheckButtonSelector:".quiz-card__button",generalButtonSelector:".blocks-button__button"},listBlock:{container:".block-list"},listNumberedBlock:{container:".block-list--numbered",numberElement:".block-list__number"},numberedDivider:{dividerWrap:".block-divider--numbered .block-divider__wrap"},getNextSiblingMod:{lessonBlock:".blocks-lesson",blockWrapper:".block-wrapper",siblingByBlockId:'[data-block-id="{{BLOCK_ID}}"]'},beginButtonMod:{coverPageSelector:".cover__header",beginButtonActionWrapper:".cover__header-content-action-wrapper",descriptionBoxContainer:".cover__details-description-outline",tableOfContentsContainer:".cover__details-content-section--type-outline",tableOfContentsContainerImaginationTheme:".cover__details-content-section--type-outline-no-logo",beginButton:".cover__header-content-action-link",firstSectionHasTitle:".cover__details-content-section--type-outline section:first-child .overview-list__section-title"}}},a=window["ng.core"];function g(t,l,i,o,c,d,u){try{var r=t[d](u),s=r.value}catch(m){return void i(m)}r.done?l(s):Promise.resolve(s).then(o,c)}const h=window["ng.common.http"],k="IS_PACKAGED",p=window.rxjs;let T=(()=>{class t{constructor(i,o){this.http=i,this.isPackaged=o,this.elementSelectors=y}init(){var i=this;return function R(t){return function(){var l=this,i=arguments;return new Promise(function(o,c){var d=t.apply(l,i);function u(s){g(d,o,c,u,r,"next",s)}function r(s){g(d,o,c,u,r,"throw",s)}u(void 0)})}}(function*(){if(!i.isPackaged){const o=yield(0,p.lastValueFrom)(i.http.get("/api/rise-selectors"));i.elementSelectors=o}})()}static#e=this.\u0275fac=function(o){return new(o||t)(a.\u0275\u0275inject(h.HttpClient),a.\u0275\u0275inject(k))};static#t=this.\u0275prov=a.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),x=(()=>{class t{set blockElement(i){this._blockElement=i,this.moveStylesToBlockElement(),this.initMutationObserver()}get blockElement(){return this._blockElement}set data(i){this._data="string"==typeof i?JSON.parse(i):i}get data(){return this._data}constructor(i,o){this.elementRef=i,this.riseElementSelectorsService=o}initMutationObserver(){const i=()=>{this.elementRef.nativeElement.style.cssText.split(";").filter(r=>r.trim().startsWith("--")).map(r=>r.trim()).forEach(r=>{const s=r.split(":").map(m=>m.trim());this.blockElement.style.setProperty(s[0],s[1],"important")})},o=()=>{Array.from(this.elementRef.nativeElement.attributes).forEach(u=>{"style"!==u.name&&"class"!==u.name&&this.blockElement.setAttribute(u.name,u.value)})};i(),o(),new MutationObserver(()=>{i(),o()}).observe(this.elementRef.nativeElement,{attributes:!0})}moveStylesToBlockElement(){this.blockElement.id=this.blockId,this.elementRef.nativeElement.querySelector("style")?.remove();const i=Array.from(this.elementRef.nativeElement.shadowRoot?.querySelectorAll("style")??[]),o=i[i.length-1];if(o){const c=o.cloneNode(!0);c.innerText=c.innerText.replaceAll(":host",`[id="${this.blockId}"]`),this.elementRef.nativeElement.prepend(c)}}static#e=this.\u0275fac=function(o){return new(o||t)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(T))};static#t=this.\u0275dir=a.\u0275\u0275defineDirective({type:t,inputs:{riseBlockType:"riseBlockType",blockId:"blockId",blockElement:"blockElement",data:"data",editable:"editable"}})}return t})(),D=(()=>{class t{constructor(){this.dataUpdated=new a.EventEmitter}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275dir=a.\u0275\u0275defineDirective({type:t,inputs:{riseBlockType:"riseBlockType",blockId:"blockId",block:"block",data:"data"},outputs:{dataUpdated:"dataUpdated"}})}return t})(),P=(()=>{class t{set data(i){this._data="string"==typeof i?JSON.parse(i):i}get data(){return this._data}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275dir=a.\u0275\u0275defineDirective({type:t,inputs:{data:"data"}})}return t})(),A=(()=>{class t{constructor(){this.dataUpdated=new a.EventEmitter,this.updateIFrame=new a.EventEmitter,this.dataReset=new a.EventEmitter}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275dir=a.\u0275\u0275defineDirective({type:t,inputs:{data:"data"},outputs:{dataUpdated:"dataUpdated",updateIFrame:"updateIFrame",dataReset:"dataReset"}})}return t})();const w=window["ng.elements"],f=window["ng.platformBrowser"],C="RISE_COURSE_DATA_SERVICE";let _=(()=>{class t{constructor(i,o){this.isPackaged=i,this.http=o,this.cachedCourseDataStore=new p.BehaviorSubject(void 0),this.cachedCourseData$=this.cachedCourseDataStore.asObservable(),this.cachedRiseUserData$=new p.BehaviorSubject(void 0),setTimeout(()=>{this.fetchCourse$().subscribe()})}getCachedCourseData(){return this.cachedCourseDataStore.value}fetchCourse$(i){if(i){const o={course:{...i.course,lessons:i.lessons},collaborators:i.collaborators};return this.cachedCourseDataStore.next(o),(0,p.of)(o)}return window?.Runtime?.courseDataReady?(0,p.from)(window.Runtime.courseDataReady()).pipe((0,p.tap)(o=>{this.cachedCourseDataStore.next(o)})):this.http.get(`https://rise.articulate.com/api/rise-runtime/boot/${window.shareId?"share/":""}${window.shareId||window.courseId}`).pipe((0,p.map)(o=>{let c;return c="string"==typeof o?function O(t){if(t)try{const l=JSON.parse(t);if(l)return l}catch{return null}return null}(function L(t){return decodeURIComponent(atob(t).split("").map(function(l){return"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)}).join(""))}(o)):o,{course:{...c.course,lessons:c.course.lessons}}}),(0,p.tap)(o=>{this.cachedCourseDataStore.next(o)}))}static#e=this.\u0275fac=function(o){return new(o||t)(a.\u0275\u0275inject(k),a.\u0275\u0275inject(h.HttpClient))};static#t=this.\u0275prov=a.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const I="RISE_FILE_SERVICE";let E=(()=>{class t{constructor(i,o){this.courseDataService=i,this.sanitizer=o}getFilePath(i){return`assets/${i}`}getInteractivePath(i){return this.sanitizer.bypassSecurityTrustResourceUrl(`assets/${i.key.replace(/\.[^/.]+$/,"")}/index.html`)}getMightyBlockAssetPath(i){return`mighty-blocks/block-assets/${i}`}getFileRecord$(i){return this.courseDataService.cachedCourseData$.pipe((0,p.map)(c=>(c=>c?.course.lessons.flatMap(d=>d.items).flatMap(d=>d.items).find(d=>d?.id===i)?.media?.attachment)(c)))}static#e=this.\u0275fac=function(o){return new(o||t)(a.\u0275\u0275inject(_),a.\u0275\u0275inject(f.DomSanitizer))};static#t=this.\u0275prov=a.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function j(t){(0,f.createApplication)({providers:[(0,h.provideHttpClient)(),{provide:k,useValue:!0},{provide:C,useClass:_},{provide:I,useClass:E}]}).then(l=>{const i=(0,a.reflectComponentType)(t),o=(0,w.createCustomElement)(t,{injector:l.injector});customElements.define(i.selector,o)})}function F(t){(0,f.createApplication)({providers:[(0,h.provideHttpClient)(),{provide:k,useValue:!0},{provide:C,useClass:_},{provide:I,useClass:E}]}).then(l=>{const i=(0,a.reflectComponentType)(t),o=(0,w.createCustomElement)(t,{injector:l.injector});customElements.define(i.selector,o)})}window["mightyMods.common"]=v,function M(){window.addEventListener("load",()=>{window.Runtime.courseDataReady().then(t=>{if(window.Runtime&&window.Runtime.isExport&&window.Runtime.isExport()&&t){const i=[];t.course.theme?.mightyMods&&t.course.theme.mightyMods.forEach(r=>{i.push(r)}),i.forEach(r=>{const s=document.createElement(r.tagName);s.setAttribute("data",JSON.stringify(r.data)),document.body.appendChild(s)});const c=[];console.log("loading rise mods!",c),t.course.lessons.forEach(r=>{r.items.forEach(s=>{s.settings?.mightyMods&&s.settings.mightyMods.length>0&&s.settings.mightyMods.forEach(m=>{c.push({blockId:s.id,mod:m,riseBlockType:B({family:s.family,type:s.type,variant:s.variant})})})})});const d=()=>{c.forEach(r=>{const s=document.querySelector(y.publishedCoursePage.riseBlocks.blockIdSelectorWithId.replace("{{RISE_BLOCK_ID}}",r.blockId));if(s&&!s.querySelector(r.mod.tagName)){const m=document.createElement(r.mod.tagName);m.setAttribute("data",JSON.stringify(r.mod.data)),m.setAttribute("rise-block-type",r.riseBlockType),m.setAttribute("block-id",r.blockId),m.blockElement=s,s.appendChild(m)}})};d(),new MutationObserver(()=>{d()}).observe(document.body,{childList:!0,subtree:!0})}})})}()})();